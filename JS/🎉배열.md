# 🎉배열

---

> 모던 자바스크립트 Deep Dive에서 중요하다고 생각이 드는 부분들을 정리한다.

---

자바스크립트에는 배열이라는 타입이 존재하지 않는다. 배열은 객체 타입이다.

배열은 객체이지만, 일반 객체와는 구별되는 독특한 특징이 있다.

|      구분       |           객체            |     배열      |
| :-------------: | :-----------------------: | :-----------: |
|      구조       | 프로퍼티 키와 프로퍼티 값 | 인덱스와 요소 |
|    값의 참조    |        프로퍼티 키        |    인덱스     |
|    값의 순서    |             X             |       O       |
| length 프로퍼티 |             X             |       O       |

일반 객체와 배열을 구분하는 가장 명확한 차이는 "값의 순서"와 "length 프로퍼티" 이다. 

---

자바스크립트의 배열은 지금까지 살펴본 자료구조에서 말하는 일반적인 의미의 배열과는 다르다. 즉, 배열의 요소를 위한 각각의 메모리 공간은 동일한 크기를 갖지 않아도 되며, 연속적으로 이어져 있지 않을 수도 있다. 배열의 요소가 연속적으로 이어져 있지 않는 배열을 **희소 배열(sparse array)**이라 하며, 자바스크립트의 배열이 그러하다.

때문에 자바스크립트의 배열은 엄밀히 말해 일반적 의미의 배열이 아니다. 자바스크립트의 배열은 일반적인 배열의 동작을 흉내 낸 특수한 객체이다.

일반적인 배열과 자바스크립트 배열의 장단점을 정리해보면 다음과 같다.

- 일반적인 배열은 인덱스로 요소에 빠르게 접근할 수 있다. 하지만, 특정 요소를 검색하거나 요소를 삽입 또는 삭제하는 경우에는 효율적이지 않다.
- 자바스크립트 배열은 해시 테이블로 구현된 객체이므로 인덱스로 요소에 접근하는 경우 일반적인 배열보다 성능적인 면에서 느릴 수 밖에 없는 구조적인 단점이 있다. 하지만, 특정 요소를 검색하거나 요소를 삽입 또는 삭제하는 경우에는 일반적인 배열보다 빠른 성능을 기대할 수 있다.

인덱스로 배열 요소에 접근할 때, 일반적인 배열보다 느릴 수 밖에 없는 구조적인 단점을 보완하기 위해 대부분의 모던 자바스크립트 엔진은 배열을 일반 객체와 구별하여 좀 더 배열처럼 동작하도록 최적화하여 구현했다.

```javascript
const arr = []

for(let i = 0; i < 10000000; i++) {
	arr[i] = i 
}
// 약 340ms

const obj = {}

for(let i = 0; i < 10000000; i++) {
	obj[i] = i
}
// 약 600ms
```

 그런데 실제 알고리즘 문제를 풀다보면 key값이 문자열인 배열 혹은 객체를 만드는 일이 종종 있다. 그렇다면, 이런 일반적이지 않은 배열에서는 어떤 것이 더 빠를까?

실제 벤치마크를 돌려보니 둘 다 비슷하다. 아무래도 둘다 해시 테이블을 통해 접근해야하다보니 그러한 것 같다. 

때문에, key값이 문자열이라면 빈 배열보다는 빈 객체에 저장하는 것이 훨씬 직관적이고 좋은 선택지가 될 것 같다.

---

